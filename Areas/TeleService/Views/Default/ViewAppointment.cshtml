@{
    Layout = "~/Areas/TeleService/Views/Shared/_Layout.cshtml";
}

<div class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1 class="m-0"> Appointment Details </h1>
            </div><!-- /.col -->
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item"><a href="#">Home</a></li>
                    <li class="breadcrumb-item active">Appointmnent Details</li>
                </ol>
            </div><!-- /.col -->
        </div><!-- /.row -->
    </div><!-- /.container-fluid -->
</div>

<div class="container-fluid">
    <form id="AppointForm" action="#" method="post">
        <div class="card">
            <div class="card-header">
                <h5>New Appointment</h5>
            </div>
            <div class="card-body">
                <div class="row mr-auto">
                    <div class="mx-auto text-center">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text text-bold" id="inputGroup-sizing-default">Application ID</span>
                            </div>
                            <input type="text" class="form-control" id="txtAppId" disabled aria-label="Default" aria-describedby="inputGroup-sizing-default">
                        </div>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-md-6">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text text-bold" id="inputGroup-sizing-default">Name</span>
                            </div>
                            <input type="text" class="form-control" id="txtName" disabled aria-label="Default" aria-describedby="inputGroup-sizing-default">
                        </div>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text text-bold" id="inputGroup-sizing-default">Gender</span>
                            </div>
                            <input type="text" class="form-control" id="txtGender" disabled aria-label="Default" aria-describedby="inputGroup-sizing-default">

                        </div>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text text-bold" id="inputGroup-sizing-default">Age</span>
                            </div>
                            <input type="text" class="form-control" id="txtAge" disabled aria-label="Default" aria-describedby="inputGroup-sizing-default">
                        </div>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text text-bold" id="inputGroup-sizing-default">Phone Number</span>
                            </div>
                            <input type="text" class="form-control" id="txtPhone" disabled  maxlength="10" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                        </div>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text text-bold" id="inputGroup-sizing-default">Alternate Number</span>
                            </div>
                            <input type="text" class="form-control" id="txtAltPhone" disabled aria-label="Default" aria-describedby="inputGroup-sizing-default">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text text-bold" id="inputGroup-sizing-default">Email</span>
                            </div>
                            <input type="text" class="form-control" id="txtEmail" disabled  aria-label="Default" aria-describedby="inputGroup-sizing-default">
                        </div>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text text-bold" id="inputGroup-sizing-default">Department</span>
                            </div>
                        <input type="text" class="form-control" id="txtDept" disabled  aria-label="Default" aria-describedby="inputGroup-sizing-default">
                        </div>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text text-bold" id="inputGroup-sizing-default">Speciality</span>
                            </div>
                            <input type="text" class="form-control" id="txtSpeciality" disabled  aria-label="Default" aria-describedby="inputGroup-sizing-default">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="input-group mb-3">
                        <label class="control-label col-md-4" for="email">Short Description</label>
                        <div class="col-md-12">
                            <textarea class="col-md-12" id="txtSDesc" disabled draggable="true"></textarea>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="input-group mb-3">
                        <label class="control-label col-md-4" for="email">Description</label>
                        <div class="col-md-12">
                            <textarea class="col-md-12" id="txtDesc" disabled draggable="true"></textarea>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <button type="button" id="btnBack" class="btn btn-primary" onclick="VABack()"><span><i class="fa fa-arrow-left" aria-hidden="true"></i></span> Back</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<script>
    $(document).ready(function () {

        const urlparam = new URLSearchParams(window.location.search);
        const id = urlparam.get('id');

        $.ajax({

            url: '/api/Appointment/AppId/' + id,
            method: 'Get',
            dataType: 'json',

            success: function (data) {

                document.getElementById('txtAppId').value = data.AppId;
                document.getElementById('txtName').value = data.Name;
                document.getElementById('txtGender').value = data.Gender;
                document.getElementById('txtAge').value = data.Age;
                document.getElementById('txtPhone').value = data.Phone;
                document.getElementById('txtAltPhone').value = data.AltNumber;
                document.getElementById('txtEmail').value = data.Email;
                document.getElementById('txtSDesc').value = data.ShortDesc;
                document.getElementById('txtDesc').value = data.Desc;
                document.getElementById('txtDept').value = data.DeptId;
                document.getElementById('txtSpeciality').value = data.Speciality;
            }
        });
    });
    function VABack() {
        var url = '@Url.Action("AllAppointments", "Default")';
        window.location.href = url;
    }
</script>

